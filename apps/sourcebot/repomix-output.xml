This file is a merged representation of the entire codebase, combined into a single document by Repomix.
The content has been processed where content has been compressed (code blocks are separated by ⋮---- delimiter).

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Content has been compressed - code blocks are separated by ⋮---- delimiter
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
metadata/
  description.md
  logo.jpg
config.json
docker-compose.json
docker-compose.yml
sourcebot-config.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="metadata/description.md">
## Sourcebot

[Sourcebot](https://sourcebot.dev) is a self-hosted tool that helps developers and agents understand your codebase.

### Features

**Ask Sourcebot**
Ask complex questions about your codebase in natural language. It uses Sourcebot's existing code search and navigation tools to allow reasoning models to search your code, follow code nav references, and provide an answer that's rich with inline citations and navigable code snippets.

**Code Search**
Search across all your repos and branches, no matter where they're hosted. Blazingly fast, and supports regular expressions, repo/language search filters, boolean logic, and more.

**Code Navigation**
IDE-level code navigation (goto definition and find references) across all your repos.

**Built-in File Explorer**
Explore every file across all of your repos. Modern UI with syntax highlighting, file tree, code navigation, etc.

**Works with any code host and LLM**
Connect your code, wherever it's hosted. Bring your own LLM API key for Agentic Search and MCP. All hosted securely on-prem.
</file>

<file path="config.json">
{
  "name": "Sourcebot",
  "id": "sourcebot",
  "available": true,
  "dynamic_config": false,
  "created_at": 1739266779000,
  "updated_at": 1739266779000,
  "short_desc": "Self-hosted tool that helps developers and agents understand your codebase.",
  "author": "https://sourcebot.dev",
  "port": 3000,
  "categories": ["development", "utilities"],
  "description": "Sourcebot is a self-hosted tool that helps you understand your codebase. Ask Sourcebot: Ask questions about your codebase and have Sourcebot provide detailed answers grounded with inline citations. Code search: Search and navigate across all your repos and branches, no matter where they're hosted.",
  "tipi_version": 1,
  "version": "latest",
  "source": "https://github.com/sourcebot-dev/sourcebot",
  "website": "https://sourcebot.dev",
  "exposable": true,
  "form_fields": [
    {
      "env_variable": "AUTH_SECRET",
      "label": "Auth Secret",
      "type": "random",
      "min": 33,
      "max": 33,
      "encoding": "base64"
    },
    {
      "env_variable": "SOURCEBOT_ENCRYPTION_KEY",
      "label": "Encryption Key",
      "type": "random",
      "min": 24,
      "max": 24,
      "encoding": "base64"
    },
    {
      "env_variable": "SOURCEBOT_POSTGRES_PASSWORD",
      "label": "Postgres Password",
      "type": "random",
      "min": 32
    }
  ],
  "supported_architectures": ["amd64", "arm64"],
  "$schema": "../app-info-schema.json"
}
</file>

<file path="docker-compose.json">
{
  "services": [
    {
      "name": "sourcebot",
      "image": "ghcr.io/sourcebot-dev/sourcebot:latest",
      "isMain": true,
      "internalPort": 3000,
      "environment": [
        {
          "key": "CONFIG_PATH",
          "value": "/data/config.json"
        },
        {
          "key": "AUTH_URL",
          "value": "${APP_PROTOCOL}://${APP_DOMAIN}"
        },
        {
          "key": "AUTH_SECRET",
          "value": "${AUTH_SECRET}"
        },
        {
          "key": "SOURCEBOT_ENCRYPTION_KEY",
          "value": "${SOURCEBOT_ENCRYPTION_KEY}"
        },
        {
          "key": "DATABASE_URL",
          "value": "postgresql://sourcebot:${SOURCEBOT_POSTGRES_PASSWORD}@sourcebot-postgres:5432/sourcebot"
        },
        {
          "key": "REDIS_URL",
          "value": "redis://sourcebot-redis:6379"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/data"
        }
      ],
      "dependsOn": {
        "sourcebot-postgres": {
          "condition": "service_healthy"
        },
        "sourcebot-redis": {
          "condition": "service_healthy"
        },
        "sourcebot-init": {
          "condition": "service_completed_successfully"
        }
      },
      "user": "1500:1500"
    },
    {
      "name": "sourcebot-postgres",
      "image": "postgres:16",
      "environment": [
        {
          "key": "POSTGRES_USER",
          "value": "sourcebot"
        },
        {
          "key": "POSTGRES_PASSWORD",
          "value": "${SOURCEBOT_POSTGRES_PASSWORD}"
        },
        {
          "key": "POSTGRES_DB",
          "value": "sourcebot"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/postgres",
          "containerPath": "/var/lib/postgresql/data"
        }
      ],
      "healthCheck": {
        "test": "CMD-SHELL pg_isready -U sourcebot",
        "interval": "3s",
        "timeout": "3s",
        "retries": 10
      }
    },
    {
      "name": "sourcebot-redis",
      "image": "redis:8",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/redis",
          "containerPath": "/data"
        }
      ],
      "healthCheck": {
        "test": "CMD redis-cli ping",
        "interval": "3s",
        "timeout": "10s",
        "retries": 10
      }
    },
    {
      "name": "sourcebot-init",
      "image": "alpine:latest",
      "command": "sh -c \"if [ ! -f /data/config.json ]; then cp /sourcebot-config.json /data/config.json; fi && chown -R 1500:1500 /data\"",
      "volumes": [
        {
          "hostPath": "./sourcebot-config.json",
          "containerPath": "/sourcebot-config.json"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/data"
        }
      ]
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
</file>

<file path="docker-compose.yml">
version: "3.7"
services:
  sourcebot:
    image: ghcr.io/sourcebot-dev/sourcebot:latest
    container_name: sourcebot
    restart: unless-stopped
    user: "1500:1500"
    ports:
      - ${APP_PORT}:3000
    volumes:
      - ${APP_DATA_DIR}/data:/data
    environment:
      - CONFIG_PATH=/data/config.json
      - AUTH_URL=${APP_PROTOCOL}://${APP_DOMAIN}
      - AUTH_SECRET=${AUTH_SECRET}
      - SOURCEBOT_ENCRYPTION_KEY=${SOURCEBOT_ENCRYPTION_KEY}
      - DATABASE_URL=postgresql://sourcebot:${SOURCEBOT_POSTGRES_PASSWORD}@sourcebot-postgres:5432/sourcebot
      - REDIS_URL=redis://sourcebot-redis:6379
    depends_on:
      sourcebot-postgres:
        condition: service_healthy
      sourcebot-redis:
        condition: service_healthy
      sourcebot-init:
        condition: service_completed_successfully
    networks:
      - tipi_main_network
    labels:
      traefik.enable: true
      traefik.http.routers.sourcebot.rule: Host(`${APP_DOMAIN}`)
      traefik.http.routers.sourcebot.entrypoints: websecure
      traefik.http.routers.sourcebot.tls.certresolver: myresolver
      traefik.http.services.sourcebot.loadbalancer.server.port: 3000
      runtipi.managed: true

  sourcebot-postgres:
    image: postgres:16
    container_name: sourcebot-postgres
    restart: unless-stopped
    environment:
      POSTGRES_USER: sourcebot
      POSTGRES_PASSWORD: ${SOURCEBOT_POSTGRES_PASSWORD}
      POSTGRES_DB: sourcebot
    volumes:
      - ${APP_DATA_DIR}/data/postgres:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U sourcebot"]
      interval: 3s
      timeout: 3s
      retries: 10
    networks:
      - tipi_main_network
    labels:
      runtipi.managed: true

  sourcebot-redis:
    image: redis:8
    container_name: sourcebot-redis
    restart: unless-stopped
    volumes:
      - ${APP_DATA_DIR}/data/redis:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 3s
      timeout: 10s
      retries: 10
    networks:
      - tipi_main_network
    labels:
      runtipi.managed: true

  sourcebot-init:
    image: alpine:latest
    container_name: sourcebot-init
    command: sh -c "if [ ! -f /data/config.json ]; then cp /sourcebot-config.json /data/config.json; fi && chown -R 1500:1500 /data"
    volumes:
      - ./sourcebot-config.json:/sourcebot-config.json
      - ${APP_DATA_DIR}/data:/data
    labels:
      runtipi.managed: true
</file>

<file path="sourcebot-config.json">
{
  "$schema": "https://raw.githubusercontent.com/sourcebot-dev/sourcebot/main/schemas/v3/index.json",
  "connections": {
    "starter-connection": {
      "type": "github",
      "repos": [
        "sourcebot-dev/sourcebot"
      ]
    }
  }
}
</file>

</files>
